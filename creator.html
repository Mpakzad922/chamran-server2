<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù¾Ù†Ù„ Ø³Ø§Ø®Øª Ùˆ ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø­ØªÙˆØ§</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ø®ØªØµØ§ØµÛŒ Ù¾Ù†Ù„ Ø³Ø§Ø²Ù†Ø¯Ù‡ */
        .container { width: 100%; max-width: 900px; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); margin: 20px auto; }
        
        .tabs { display: flex; gap: 10px; margin-bottom: 25px; border-bottom: 2px solid #eee; padding-bottom: 10px; overflow-x: auto; }
        .tab-btn { flex: 1; padding: 12px; background: #ecf0f1; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; color: #7f8c8d; transition: 0.3s; white-space: nowrap; }
        .tab-btn.active { background: var(--primary); color: white; transform: translateY(-3px); }

        .section { display: none; animation: fadeIn 0.4s; }
        .section.active { display: block; }

        .row { display: flex; gap: 10px; align-items: center; margin-bottom: 10px; }
        
        .q-box { background: #f8f9fa; border: 2px solid #e1e8ed; border-radius: 15px; padding: 20px; margin-bottom: 25px; position: relative; border-right: 5px solid var(--blue); }
        .del-q { position: absolute; left: 15px; top: 15px; color: var(--danger); cursor: pointer; border: 1px solid var(--danger); padding: 2px 8px; border-radius: 5px; background: #fff; font-size: 0.8rem; }
        
        .history-card { background: white; border: 1px solid #eee; border-right: 5px solid #ccc; padding: 15px; margin-bottom: 15px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; transition: 0.2s; }
        .history-card:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        .edit-badge { background: var(--warning); color: white; padding: 10px; border-radius: 10px; text-align: center; margin-bottom: 20px; display: none; font-weight: bold; }
    </style>
</head>
<body>

    <input type="file" id="globalFileInput" style="display: none;" accept="image/*">

    <div id="loginOverlay" class="modal-overlay show" style="background:var(--primary);">
        <div class="modal-content" style="text-align:center;">
            <h2 style="margin-bottom: 20px;">ğŸ” ÙˆØ±ÙˆØ¯ Ø³Ø§Ø²Ù†Ø¯Ù‡</h2>
            <input type="password" id="adminTokenInput" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù…Ø¯ÛŒØ±ÛŒØª..." style="text-align:center;">
            <button class="btn btn-accent" onclick="checkLogin()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…</button>
        </div>
    </div>

    <div class="container hidden" id="mainContainer">
        
        <div id="editModeBadge" class="edit-badge">
            âœï¸ Ø¯Ø± Ø­Ø§Ù„ ÙˆÛŒØ±Ø§ÛŒØ´: <span id="editTargetName">...</span>
            <button onclick="cancelEdit()" class="btn btn-outline" style="background:white; display:inline-block; width:auto; padding:5px 10px; margin-right:10px;">Ù„ØºÙˆ</button>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('create')">â• Ø³Ø§Ø®Øª Ù…Ø­ØªÙˆØ§</button>
            <button class="tab-btn" onclick="switchTab('manage')">ğŸ“‚ Ù…Ø¯ÛŒØ±ÛŒØª ÙØ§ÛŒÙ„â€ŒÙ‡Ø§</button>
        </div>

        <div id="tab-create" class="section active">
            <label>Ù†ÙˆØ¹ Ù…Ø­ØªÙˆØ§ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:</label>
            <select id="contentType" onchange="toggleForm()" style="background:#f0f8ff; font-weight:bold; color:var(--primary);">
                <option value="lesson">ğŸ¬ Ø¯Ø±Ø³ (ÙˆÛŒØ¯ÛŒÙˆ)</option>
                <option value="exam">ğŸ“ Ø¢Ø²Ù…ÙˆÙ† (Ø³ÙˆØ§Ù„Ø§Øª)</option>
                <option value="homework">ğŸ“¤ ØªÚ©Ù„ÛŒÙ (Ø¬Ø¯ÛŒØ¯)</option>
            </select>

            <div style="margin-bottom: 20px; display: flex; align-items: center; gap: 10px; background: #fff0f0; padding: 10px; border-radius: 10px; border: 1px dashed var(--danger);">
                <input type="checkbox" id="isNewContent" style="width: 20px; margin:0;">
                <span style="color:var(--danger); font-weight:bold;">Ù†Ù…Ø§ÛŒØ´ Ø¨Ø±Ú†Ø³Ø¨ "Ø¬Ø¯ÛŒØ¯ ğŸ”¥"</span>
            </div>

            <div id="lessonForm">
                <input id="l_title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø¯Ø±Ø³ (Ù…Ø«Ù„Ø§Ù‹: Ø±ÛŒØ§Ø¶ÛŒ ÙØµÙ„ Û´)">
                <input id="l_link" dir="ltr" placeholder="Ù„ÛŒÙ†Ú© Ù…Ø³ØªÙ‚ÛŒÙ… ÙÛŒÙ„Ù… (MP4)">
                
                <label>ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¶Ù…ÛŒÙ…Ù‡:</label>
                <div id="attach_container"></div>
                <button type="button" class="btn btn-warning" onclick="addAttachRow()" style="width:auto; font-size:0.9rem;">â• Ø§ÙØ²ÙˆØ¯Ù† ÙØ§ÛŒÙ„</button>
                
                <button id="btnSaveLesson" class="btn btn-accent" onclick="saveLesson()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø±Ø³</button>
            </div>

            <div id="examForm" class="hidden">
                <div class="row">
                    <input id="e_title" placeholder="Ù†Ø§Ù… Ø¢Ø²Ù…ÙˆÙ†" style="flex:2">
                    <input type="number" id="e_time" placeholder="Ø²Ù…Ø§Ù† (Ø¯Ù‚ÛŒÙ‚Ù‡)" value="15" style="flex:1">
                    <input id="e_pass" placeholder="Ø±Ù…Ø² (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)" style="flex:1">
                </div>
                
                <div class="card" style="background:#e8f6f3; border:1px dashed var(--accent); padding:15px; margin:15px 0;">
                    <h4 style="margin:0 0 10px 0; color:var(--accent);">ğŸ ØªÙ†Ø¸ÛŒÙ… Ø¬ÙˆØ§ÛŒØ² (XP)</h4>
                    <div class="row">
                        <input type="number" id="r_excellent" placeholder="Ø¹Ø§Ù„ÛŒ" value="300">
                        <input type="number" id="r_good" placeholder="Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨" value="100">
                        <input type="number" id="r_normal" placeholder="Ø®ÙˆØ¨" value="20">
                    </div>
                </div>
                
                <div id="questions_area"></div>
                
                <button onclick="addQuestion()" class="btn btn-warning" style="margin-bottom:10px;">â• Ø³ÙˆØ§Ù„ Ø¬Ø¯ÛŒØ¯</button>
                <button id="btnSaveExam" class="btn btn-blue" onclick="saveExam()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ø¢Ø²Ù…ÙˆÙ†</button>
            </div>

            <div id="homeworkForm" class="hidden">
                <input id="hw_title" placeholder="Ø¹Ù†ÙˆØ§Ù† ØªÚ©Ù„ÛŒÙ (Ù…Ø«Ù„Ø§Ù‹: Ø¹Ú©Ø³ Ø§Ø² ØµÙØ­Ù‡ Û²Û° Ø±ÛŒØ§Ø¶ÛŒ)">
                <textarea id="hw_desc" rows="4" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²..."></textarea>
                <button id="btnSaveHomework" class="btn btn-primary" onclick="saveHomework()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªÚ©Ù„ÛŒÙ</button>
            </div>
        </div>

        <div id="tab-manage" class="section">
            <input type="text" id="searchBox" placeholder="ğŸ” Ø¬Ø³ØªØ¬Ùˆ..." onkeyup="renderHistory()">
            <div id="contentList"></div>
            <button onclick="fetchHistory()" class="btn btn-outline" style="margin-top:20px;">ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù„ÛŒØ³Øª</button>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="creator.js"></script>
</body>
</html>